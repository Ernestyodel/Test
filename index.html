<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TONFI — Liquidity-Powered Meme on TON</title>
  <meta name="description" content="TONFI is a meme-driven token on TON with auto-LP reserve, buy-back-and-burn, and holder rewards." />
  <meta name="theme-color" content="#0098EA" />
  <style>
    :root{
      --bg:#06090f; --card:#0b1220; --muted:#94a3b8; --text:#e6f1ff;
      --primary:#0098EA; --accent:#00c2ff; --success:#16a34a; --danger:#ef4444;
      --radius:20px; --shadow:0 8px 30px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.04);
    }
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";color:var(--text);background:var(--bg);line-height:1.6;overflow-x:hidden}
    .container{width:min(1200px,90vw);margin-inline:auto}
    header{position:sticky;top:0;z-index:50;backdrop-filter:saturate(140%) blur(10px);background:linear-gradient(180deg, rgba(10,16,26,.85), rgba(10,16,26,.35));border-bottom:1px solid rgba(255,255,255,.06)}
    .nav{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:14px 0}
    .brand{display:flex;align-items:center;gap:12px}
    .brand img{width:38px;height:38px;border-radius:50%;object-fit:cover;box-shadow:0 2px 10px rgba(0,0,0,.3)}
    nav a{color:var(--text);text-decoration:none;opacity:.85} nav a:hover{opacity:1}
    .links{display:flex;gap:16px;align-items:center}
    .cta{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;background:linear-gradient(180deg,#0ea5e9,#0284c7);border-radius:999px;color:white;border:1px solid rgba(255,255,255,.12);box-shadow:var(--shadow);text-decoration:none;white-space:nowrap}
    .cta.secondary{background:transparent;border:1px solid rgba(255,255,255,.15)}
    .menu-btn{display:none}
    @media (max-width:820px){
      nav{display:none}
      .menu-btn{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.15);background:transparent;color:var(--text)}
      .drawer{position:fixed;inset:0;background:rgba(2,6,12,.6);backdrop-filter: blur(6px);display:none}
      .sheet{position:absolute;right:0;top:0;height:100%;width:min(85vw,380px);background:#0a121f;border-left:1px solid rgba(255,255,255,.08);padding:20px}
      .sheet a{display:block;padding:12px 10px;border-radius:8px}
      .drawer.open{display:block}
    }
    .hero{position:relative;padding:84px 0 48px;overflow:hidden}
    .hero-inner{display:grid;grid-template-columns:1.15fr .85fr;gap:28px;align-items:center}
    @media (max-width:980px){.hero-inner{grid-template-columns:1fr;gap:22px}}
    .card{background:linear-gradient(180deg,rgba(17,27,45,.9),rgba(9,15,26,.9));border:1px solid rgba(255,255,255,.06);border-radius:var(--radius);box-shadow:var(--shadow)}
    .hero-copy{padding:28px}
    .eyebrow{color:var(--accent);font-weight:600;letter-spacing:1.2px;font-size:.82rem}
    .hero h2{font-size:clamp(1.6rem,3vw,2.4rem);margin:.3rem 0 1rem}
    .hero p{color:var(--muted);margin:0 0 1.2rem}
    .hero-actions{display:flex;gap:12px;flex-wrap:wrap}
    .hero-visual{display:flex;align-items:center;justify-content:center;padding:28px;position:relative}
    .logo-wrap{display:grid;place-items:center}
    .logo-wrap img{width:160px;height:160px;border-radius:50%;object-fit:cover;border:2px solid rgba(255,255,255,.08);box-shadow:0 20px 60px rgba(0,152,234,.28)}
    .logo-fallback{display:none;font-size:40px;font-weight:800;letter-spacing:.5px;background:linear-gradient(90deg,#8be9ff,#00a9ff);-webkit-background-clip:text;background-clip:text;color:transparent}
    .ton-rain{position:absolute;inset:-10vh -10vw;pointer-events:none;z-index:-1}
    .ton-rain .drop{position:absolute;top:-10vh;width:18px;height:18px;opacity:.18;background:no-repeat center/contain url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'><path fill='%23FFFFFF' d='M24 3c.9 0 1.76.36 2.39 1l17.6 17.6c1.33 1.33 1.33 3.49 0 4.82L26.4 44.02a3.39 3.39 0 0 1-4.8 0L3.99 26.4a3.41 3.41 0 0 1 0-4.82L21.6 4a3.39 3.39 0 0 1 2.4-1z'/></svg>\");animation:fall linear infinite}
    @keyframes fall{to{transform:translateY(120vh) rotate(180deg)}}
    section{padding:56px 0} h3.section-title{margin:0 0 18px;font-size:1.3rem}
    .grid{display:grid;gap:16px}
    .grid.cols-3{grid-template-columns:repeat(3,1fr)} .grid.cols-2{grid-template-columns:repeat(2,1fr)}
    @media (max-width:980px){.grid.cols-3{grid-template-columns:1fr}.grid.cols-2{grid-template-columns:1fr}}
    .card-inner{padding:20px}
    .kpi{display:flex;align-items:center;gap:14px} .kpi .dot{width:10px;height:10px;border-radius:50%;background:var(--accent)}
    .muted{color:var(--muted)}
    .treasury{display:flex;flex-wrap:wrap;gap:14px;align-items:center}
    .address{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,\"Liberation Mono\",monospace;background:#091427;padding:10px 12px;border-radius:12px;border:1px dashed rgba(255,255,255,.12);overflow:auto;white-space:nowrap}
    .copy{padding:10px 12px;border-radius:12px;border:1px solid rgba(255,255,255,.12);background:transparent;color:var(--text)}
    .copy.ok{border-color:rgba(22,163,74,.6);box-shadow:0 0 0 3px rgba(22,163,74,.2) inset}
    .t-row{display:flex;justify-content:space-between;gap:10px;padding:8px 0;border-bottom:1px dashed rgba(255,255,255,.08)}
    .pill{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;background:rgba(0,152,234,.14);border:1px solid rgba(0,152,234,.25);color:#bfeaff;font-size:.86rem}
    footer{padding:30px 0 60px;color:var(--muted);border-top:1px solid rgba(255,255,255,.06)}
    .foot{display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:space-between}
    .social{display:flex;gap:10px}
    .social a{display:inline-flex;align-items:center;justify-content:center;width:38px;height:38px;border-radius:50%;border:1px solid rgba(255,255,255,.12);text-decoration:none;color:var(--text)}
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand">
        <img src="tonfi-logo.png" alt="TONFI logo" onerror="this.style.display='none'; document.getElementById('logo-text').style.display='block'"/>
        <strong id="logo-text" style="display:none">TONFI</strong>
      </div>
      <nav class="links">
        <a href="#about">About</a>
        <a href="#tokenomics">Tokenomics</a>
        <a href="#treasury">Treasury</a>
        <a href="#faq">FAQ</a>
        <a class="cta secondary" href="#buy">Buy</a>
        <a class="cta" href="#join">Join Community</a>
      </nav>
      <button class="menu-btn" id="menuBtn">☰ Menu</button>
    </div>
    <div class="drawer" id="drawer">
      <div class="sheet">
        <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:10px">
          <div class="brand"><img src="tonfi-logo.png" alt=""/><strong>TONFI</strong></div>
          <button class="menu-btn" onclick="toggleDrawer(false)">✕ Close</button>
        </div>
        <a href="#about" onclick="toggleDrawer(false)">About</a>
        <a href="#tokenomics" onclick="toggleDrawer(false)">Tokenomics</a>
        <a href="#treasury" onclick="toggleDrawer(false)">Treasury</a>
        <a href="#faq" onclick="toggleDrawer(false)">FAQ</a>
        <a class="cta secondary" href="#buy" onclick="toggleDrawer(false)">Buy</a>
        <a class="cta" href="#join" onclick="toggleDrawer(false)">Join Community</a>
      </div>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="ton-rain" id="tonRain"></div>
      <div class="container hero-inner">
        <div class="card hero-copy">
          <div class="eyebrow">On TON • Liquidity-Powered</div>
          <h2>TONFI — a meme with real utility: 
            <span style="background:linear-gradient(90deg,#8be9ff,#00a9ff); -webkit-background-clip:text; background-clip:text; color:transparent">auto-LP reserve</span>,
            buy-back-and-burn, and holder rewards.</h2>
          <p>Every trade fuels the reserve, which accumulates LP positions across TON projects. Yield from those LPs helps buy back and burn, while holders receive passive rewards.</p>
          <div class="hero-actions">
            <a class="cta" href="#buy">Buy on DEX</a>
            <a class="cta secondary" href="#whitepaper">Read Litepaper</a>
          </div>
        </div>
        <div class="card hero-visual">
          <div class="logo-wrap">
            <img src="tonfi-logo.png" alt="TONFI"/>
            <div class="logo-fallback">TONFI</div>
          </div>
        </div>
      </div>
    </section>

    <section id="about">
      <div class="container grid cols-3">
        <div class="card"><div class="card-inner">
          <div class="kpi"><span class="dot"></span><strong>Reserve-First Design</strong></div>
          <p class="muted">3% (buy) / 5% (sell) route to a <em>treasure reserve</em> that provides liquidity to TON projects, compounding ecosystem exposure.</p>
        </div></div>
        <div class="card"><div class="card-inner">
          <div class="kpi"><span class="dot"></span><strong>Buy-Back-and-Burn</strong></div>
          <p class="muted">LP fees and yield can be used to buy TONFI on the market and burn it, supporting long-term scarcity.</p>
        </div></div>
        <div class="card"><div class="card-inner">
          <div class="kpi"><span class="dot"></span><strong>Holder Rewards</strong></div>
          <p class="muted">2% of trades are redistributed to holders as passive income, aligning incentives with community growth.</p>
        </div></div>
      </div>
    </section>

    <section id="treasury">
      <div class="container">
        <h3 class="section-title">Treasury (Reserve) Wallet</h3>
        <div class="card"><div class="card-inner">
          <div style="display:flex; align-items:baseline; gap:10px; margin-bottom:12px; flex-wrap:wrap">
            <h4 style="margin:0">Total Holdings</h4>
            <span class="pill" id="treasuryUsd">$—</span>
            <button class="copy" id="refreshBtn" title="Refresh total">↻ Refresh</button>
            <small class="muted" id="lastUpdated" style="margin-left:6px">Updated: —</small>
          </div>
          <div class="treasury">
            <span class="address" id="addressText">UQCa8VoKt4HcjEyhmCjY9STErQmRCqPm3n0bJYzG4dQDGLhh</span>
            <button class="copy" id="copyBtn">Copy</button>
            <a class="cta secondary" href="https://tonviewer.com/UQCa8VoKt4HcjEyhmCjY9STErQmRCqPm3n0bJYzG4dQDGLhh" target="_blank" rel="noopener">View on Explorer</a>
          </div>
          <p class="muted" style="margin-top:10px">Totals are estimated from TonAPI balances and Dexscreener USD prices. We display only the combined USD value.</p>
        </div></div>
      </div>
    </section>

    <!-- Other sections unchanged -->
  </main>

  <footer>
    <div class="container foot">
      <div>© <span id="year"></span> TONFI • Built on TON</div>
      <div><span class="muted">Made with ♥ for the TON fam</span></div>
    </div>
  </footer>

  <script>
    // Year + mobile drawer
    document.getElementById('year').textContent = new Date().getFullYear();
    const drawer = document.getElementById('drawer');
    const menuBtn = document.getElementById('menuBtn');
    function toggleDrawer(open){ drawer.classList.toggle('open', open); }
    menuBtn?.addEventListener('click', () => toggleDrawer(true));

    // Copy address
    const addrEl = document.getElementById('addressText');
    const copyBtn = document.getElementById('copyBtn');
    copyBtn?.addEventListener('click', async () => {
      try{
        await navigator.clipboard.writeText(addrEl.textContent.trim());
        copyBtn.textContent = 'Copied!';
        copyBtn.classList.add('ok');
        setTimeout(()=>{copyBtn.textContent='Copy'; copyBtn.classList.remove('ok')}, 1400);
      }catch(e){
        copyBtn.textContent = 'Select & copy';
      }
    });

    // TON rain generator
    (function rain(){
      const host = document.getElementById('tonRain');
      if(!host) return;
      const drops = 26; const vw = Math.max(document.documentElement.clientWidth||0, window.innerWidth||0);
      for(let i=0;i<drops;i++){
        const d = document.createElement('div'); d.className='drop';
        const left = Math.random()*vw; const delay = Math.random()*6; const duration = 6 + Math.random()*10; const size = 12 + Math.random()*18;
        d.style.left = left + 'px'; d.style.animationDuration = duration + 's'; d.style.animationDelay = delay + 's'; d.style.width = size + 'px'; d.style.height = size + 'px';
        host.appendChild(d);
      }
    })();

    // ===== Treasury USD Aggregator (TonAPI + Dexscreener) =====
    async function fetchTreasuryUSD(){
      const addr = 'UQCa8VoKt4HcjEyhmCjY9STErQmRCqPm3n0bJYzG4dQDGLhh';
      const usdEl = document.getElementById('treasuryUsd');
      const updEl = document.getElementById('lastUpdated');
      const refreshBtn = document.getElementById('refreshBtn');
      const fmt = (n)=> n.toLocaleString(undefined,{maximumFractionDigits:2});

      const setLoading = (v)=>{
        if(!refreshBtn) return;
        refreshBtn.disabled = v;
        refreshBtn.textContent = v ? 'Refreshing…' : '↻ Refresh';
      };

      const jget = async (url)=>{
        const ctrl = new AbortController();
        const t = setTimeout(()=>ctrl.abort(), 9000);
        try{
          const res = await fetch(url,{signal:ctrl.signal});
          clearTimeout(t);
          if(!res.ok) throw new Error('HTTP '+res.status);
          return await res.json();
        }catch(e){clearTimeout(t); throw e;}
      };

      try{
        setLoading(true);
        // 1) Native TON balance
        let tonBalanceNano = 0n;
        const info = await jget(`https://lb.tonapi.io/api-v2/accounts/${addr}`);
        if(info?.balance) tonBalanceNano = BigInt(info.balance);

        // 2) TON price (choose highest-liquidity TON/USDT on TON)
        let tonUsd = 0, sumUsd = 0;
        const ds = await jget(`https://api.dexscreener.com/latest/dex/search?q=TON/USDT`);
        const pairs = (ds?.pairs||[]).filter(p=> p.chainId==='ton' && (p.quoteToken?.symbol||'').toUpperCase().includes('USDT'));
        const best = pairs.sort((a,b)=>(b.liquidity?.usd||0)-(a.liquidity?.usd||0))[0];
        if(best) tonUsd = parseFloat(best.priceUsd||'0');

        if(tonUsd>0 && tonBalanceNano>0n){
          sumUsd += (Number(tonBalanceNano)/1e9) * tonUsd; // nanoton -> TON
        }

        // (We can add jettons later—kept simple for reliability.)
        usdEl.textContent = '$' + fmt(sumUsd);
        updEl.textContent = 'Updated: ' + new Date().toLocaleString();
      }catch(e){
        console.error(e);
        usdEl.textContent = '$0.00';
        updEl.textContent = 'Update failed';
      }finally{
        setLoading(false);
      }
    }

    // Auto-run + manual refresh
    fetchTreasuryUSD();
    document.getElementById('refreshBtn')?.addEventListener('click', fetchTreasuryUSD);
  </script>
</body>
</html>
