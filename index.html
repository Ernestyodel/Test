<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>TonFi</title>
<meta name="description" content="TonFi on TON. Simple tokenomics. Clear treasury.">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0b1220;
    --card:#0f1a2e;
    --line:#1c2b45;
    --text:#e9f1fb;
    --muted:#a3bdd6;
    --accent:#0BA6FF;
    --ok:#2ecc71; --warn:#f1c40f; --bad:#ff6b6b;
    --r:14px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:var(--bg); color:var(--text);
    font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    line-height:1.55;
  }
  .wrap{max-width:980px;margin:0 auto;padding:20px}
  header{display:flex;align-items:center;justify-content:space-between;padding:8px 0;border-bottom:1px solid var(--line)}
  header .brand{display:flex;align-items:center;gap:10px}
  header img{width:40px;height:40px;border-radius:50%}
  header h1{margin:0;font-size:18px;font-weight:700;letter-spacing:.2px}
  nav{display:flex;gap:8px;flex-wrap:wrap}
  .btn{appearance:none;border:1px solid var(--line);background:#0e182b;color:var(--text);padding:8px 12px;border-radius:999px;font-weight:600;text-decoration:none}
  .btn.primary{background:#112540;border-color:#254d75}
  main{padding:18px 0}
  .section{border:1px solid var(--line);border-radius:var(--r);background:var(--card);padding:18px;margin:14px 0}
  .title{margin:0 0 6px;font-size:18px;font-weight:700}
  .muted{color:var(--muted)}
  .kpi{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  .tile{border:1px solid var(--line);border-radius:12px;padding:14px;background:#0e182b}
  .label{color:#cfe3f8;font-size:13px}
  .value{font-size:28px;font-weight:700}
  .status{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;border:1px solid var(--line);background:#0e182b;font-size:12px}
  .ok{color:var(--ok)} .warn{color:var(--warn)} .bad{color:var(--bad)}
  ul,ol{padding-left:18px;margin:8px 0 0}
  footer{border-top:1px solid var(--line);margin-top:18px;padding:16px 0;color:#a7bfd6;font-size:14px}
  /* Responsive */
  @media (max-width:900px){ .kpi{grid-template-columns:1fr} }
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <img src="tonfi-logo.png" alt="TonFi logo">
        <h1>TonFi</h1>
      </div>
      <nav>
        <a class="btn" href="#treasury">Treasury</a>
        <a class="btn" href="#tokenomics">Tokenomics</a>
        <a class="btn primary" href="#buy">Buy</a>
      </nav>
    </header>

    <main>
      <!-- HERO: ultra simple copy -->
      <section class="section" id="about">
        <h2 class="title">Simple. Transparent. On TON.</h2>
        <p class="muted">
          TonFi uses trade taxes to support liquidity on TON, buy back and burn TONFI, and reward holders.
        </p>
      </section>

      <!-- TREASURY (USD only) -->
      <section class="section" id="treasury">
        <h2 class="title">Treasury</h2>
        <p class="muted">Public wallet and live total value in USD.</p>

        <div class="tile" style="margin-bottom:10px">
          <div class="label">Treasury Wallet</div>
          <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap">
            <code id="wallet" style="word-break:break-all">UQCa8VoKt4HcjEyhmCjY9STErQmRCqPm3n0bJYzG4dQDGLhh</code>
            <button id="copy" class="btn">Copy</button>
            <a class="btn" target="_blank" rel="noopener" href="https://tonviewer.com/UQCa8VoKt4HcjEyhmCjY9STErQmRCqPm3n0bJYzG4dQDGLhh">Tonviewer</a>
            <a class="btn" target="_blank" rel="noopener" href="https://tonscan.org/address/UQCa8VoKt4HcjEyhmCjY9STErQmRCqPm3n0bJYzG4dQDGLhh">Tonscan</a>
          </div>
        </div>

        <div class="kpi">
          <div class="tile">
            <div class="label">Total Holdings (USD)</div>
            <div id="total" class="value">Loading…</div>
            <div id="note" class="muted" style="margin-top:6px">Fetching totals…</div>
          </div>
          <div class="tile">
            <div class="label">Status</div>
            <div id="status" class="status">Initializing</div>
            <p class="muted" style="margin:8px 0 0">If main source is busy, we show a TON-only estimate.</p>
          </div>
        </div>
      </section>

      <!-- TOKENOMICS: short, plain -->
      <section class="section" id="tokenomics">
        <h2 class="title">Tokenomics</h2>
        <ul class="muted">
          <li><b>Buy Tax: 5%</b> → 3% Liquidity · 2% to holders</li>
          <li><b>Sell Tax: 7%</b> → 5% Liquidity · 2% to holders</li>
          <li>LP fees fund <b>buyback & burn</b>.</li>
          <li>Fixed supply. Burns reduce supply over time.</li>
        </ul>
      </section>

      <!-- HOW TO BUY: three steps -->
      <section class="section" id="buy">
        <h2 class="title">How to Buy</h2>
        <ol class="muted">
          <li>Get a TON wallet (Tonkeeper, MyTonWallet).</li>
          <li>Go to a DEX (DeDust or Ston.fi).</li>
          <li>Search TONFI by contract (after launch) and swap.</li>
        </ol>
      </section>
    </main>

    <footer>
      © <span id="year"></span> TonFi • Built on TON
    </footer>
  </div>

<script>
  // Utilities
  const $ = (q)=>document.querySelector(q);
  const fmtUSD = (n)=> {
    try { return new Intl.NumberFormat(undefined,{style:'currency',currency:'USD',maximumFractionDigits:2}).format(n); }
    catch { return '$' + (Math.round(n*100)/100); }
  };

  // Footer year
  $('#year').textContent = new Date().getFullYear();

  // Copy wallet
  $('#copy').addEventListener('click', async ()=>{
    const text = $('#wallet').textContent.trim();
    try { await navigator.clipboard.writeText(text); const b=$('#copy'); b.textContent='Copied ✓'; setTimeout(()=>b.textContent='Copy',1200); } catch {}
  });

  // ---- Treasury (USD total only) ----
  const WALLET = 'UQCa8VoKt4HcjEyhmCjY9STErQmRCqPm3n0bJYzG4dQDGLhh';
  const totalEl = $('#total');
  const noteEl  = $('#note');
  const statusEl= $('#status');

  function setStatus(text, cls='ok'){
    statusEl.textContent = text;
    statusEl.classList.remove('ok','warn','bad');
    statusEl.classList.add(cls);
  }

  async function getJSON(url){
    const r = await fetch(url,{headers:{accept:'application/json'}});
    if(!r.ok) throw new Error('HTTP '+r.status);
    return r.json();
  }

  async function mainSource(){
    // TonAPI portfolio: TON + jettons (USD-priced)
    const [acc, jets, rates] = await Promise.all([
      getJSON(`https://tonapi.io/v2/accounts/${WALLET}`),
      getJSON(`https://tonapi.io/v2/accounts/${WALLET}/jettons?currencies=usd`),
      getJSON('https://tonapi.io/v2/rates?tokens=ton&currencies=usd')
    ]);

    const ton = Number(acc?.balance||0)/1e9;
    const tonUsd = Number(rates?.rates?.TON?.prices?.USD ?? rates?.rates?.ton?.prices?.usd ?? 0);
    let total = tonUsd>0 ? ton*tonUsd : 0;

    const items = jets?.balances || jets?.jettons || [];
    for(const it of items){
      const price = Number(it?.price?.prices?.USD ?? it?.price?.usd ?? 0);
      const dec = Number(it?.jetton?.decimals ?? 9);
      const balRaw = Number(it?.balance||0);
      if(price>0 && balRaw>0) total += (balRaw/(10**dec))*price;
    }
    if(!(total>0)) throw new Error('No total');
    return { total, source:'TonAPI' };
  }

  async function fallbackSource(){
    // TON-only estimate via TonAPI balance + USD rate
    const [acc, rates] = await Promise.all([
      getJSON(`https://tonapi.io/v2/accounts/${WALLET}`),
      getJSON('https://tonapi.io/v2/rates?tokens=ton&currencies=usd')
    ]);
    const ton = Number(acc?.balance||0)/1e9;
    const tonUsd = Number(rates?.rates?.TON?.prices?.USD ?? rates?.rates?.ton?.prices?.usd ?? 0);
    const total = ton*tonUsd;
    if(!(total>0)) throw new Error('No TON-only total');
    return { total, source:'TON-only' };
  }

  (async function load(){
    try{
      setStatus('Contacting source…','warn');
      let data;
      try { data = await mainSource(); }
      catch { data = await fallbackSource(); }

      totalEl.textContent = fmtUSD(data.total);
      noteEl.textContent  = data.source === 'TonAPI'
        ? 'Includes tokens with available USD prices.'
        : 'Fallback estimate from native TON only.';
      setStatus(data.source==='TonAPI' ? 'Live' : 'Fallback', data.source==='TonAPI' ? 'ok' : 'warn');
    }catch(e){
      totalEl.textContent = 'Unavailable';
      noteEl.textContent  = 'Open Tonviewer/Tonscan via the wallet links above.';
      setStatus('Offline','bad');
    }
  })();
</script>
</body>
</html>
